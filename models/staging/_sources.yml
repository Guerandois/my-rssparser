version: 2

sources:
  - name: csv  # Source system name
    database: "my_rssdb_{{ target.name }}"    # Optional: database where source is stored
    schema: bronze  # Schema containing the source tables
    tables:
      - name: commune_2022
        description: 'Liste des communes de france en 2022'
        columns:
        - name: TYPECOM
          description: Type de commune
        - name: COM
          description: Code commune
        - name: REG
          description: Code région
        - name: DEP
          description: 	Code département
        - name: CTCD
          description:
        - name: ARR
          description: 	Code arrondissement
        - name: TNCC
          description: 	Type de nom en clair
        - name: NCC
          description: Nom en clair (majuscules)
        - name: NCCENR
          description: Nom en clair (typographie riche)
        - name: LIBELLE
          description: Nom en clair (typographie riche) avec article
        - name: CAN
          description: Code canton. Pour les communes « multi-cantonales » code décliné de 99 à 90 (pseudo-canton) ou de 89 à 80 (communes nouvelles)
        - name: COMPARENT
          description: Code de la commune parente pour les arrondissements municipaux et les communes associées ou déléguées.

      - name: departements
        description: 'Liste des departements de france en 2022'
        columns:
        - name: DEP
          description: Code département
        - name: REG
          description: Code région
        - name: CHEFLIEU 
          description: 	Code de la commune chef-lieu
        - name: TNCC
          description: Type de nom en clair
        - name: NCC
          description: Nom en clair (majuscules)
        - name: NCCENR
          description: Nom en clair (typographie riche)
        - name: LIBELLE
          description: Nom en clair (typographie riche) avec article

      - name: region_2022
        description: 'Liste des regions de france en 2022'
        columns:
          - name: REG
            description: Code région
          - name: CHEFLIEU
            description: Code de la commune chef-lieu
          - name: TNCC
            description: 	Type de nom en clair
          - name: NCC
            description: Nom en clair (majuscules)
          - name: NCCENR
            description: Nom en clair (typographie riche)
          - name: LIBELLE
            description: Nom en clair (typographie riche) avec article
      
      - name: rss_articles
        description: ''
        columns:
        - name: KEY
          data_tests:
            - not_null
        - name: POSTID
          data_tests:
            - not_null
        - name: TYPERSS
          data_tests:
            - not_null
        - name: TITLE
        - name: LINK
          data_tests:
            - not_null
        - name: CONTENT
        - name: LITECONTENT
        - name: PUBLISHED
          data_tests:
            - not_null
      
      # Fichier plat stocké dans seeds
      - name: calendrier_a_plat   # Table name as it exists in the database
        description: ''
        columns:
        - name: CAL_DATE
          description: 'Date du jour'
          data_tests:
            - not_null
        - name: CAL_ANNEE
          description: 'Année de la date'
          data_tests:
            - not_null
        - name: CAL_MOIS
          description: 'Mois de la date [1-12]'
          data_tests:
            - not_null
        - name: CAL_JOUR
          description: 'Jour de la date [1-31]'
          data_tests:
            - not_null
        - name: CAL_QUARTER
          description: 'Trimestre de la date [1 -4] '
          data_tests:
            - not_null
        - name: __KEY_DATE
          description: 'Clé primaire de la table'
          data_tests:
            - unique
            - not_null
        - name: CAL_TRIMESTRE
          description: ''
          data_tests:
            - not_null
        - name: CAL_TRIMESTRE_NUM
          description: ''
          data_tests:
            - not_null
        - name: CAL_JOUR_SEMAINE_NUM
          description: ''
          data_tests:
            - not_null
        - name: CAL_JOUR_SEMAINE
          description: ''
          data_tests:
            - not_null
        - name: CAL_JOUR_SEMAINE_ABR
          description: ''
          data_tests:
            - not_null
